char cases;
FILE *level=NULL,*param=NULL,*charge_level=NULL;
#define ciel couleur_RGB(92,148,252)
char stop=0;

typedef struct controldestouche{
	int up, down, left, right, run, jump;
}keyofgame;

keyofgame keyc; //key for control

int mariopose[772]={16,102,69,18,-1,-1,-1,-1,-1,-1,234,203,153,234,203,153,234,203,153,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,-1,-1,-1,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,102,69,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,0,0,255,0,0,255,234,203,153,255,0,0,255,0,0,255,0,0,255,0,0,-1,-1,-1,102,69,18,234,203,153,234,203,153,102,69,18,255,0,0,-1,-1,-1,102,69,18,102,69,18,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,255,0,0,234,203,153,234,203,153,102,69,18,102,69,18,102,69,18,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,255,255,0,0,0,255,0,0,255,0,0,255,234,203,153,234,203,153,102,69,18,234,203,153,102,69,18,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,234,203,153,234,203,153,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,234,203,153,234,203,153,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,255,255,0,0,0,255,0,0,255,255,0,0,234,203,153,0,0,0,234,203,153,0,0,0,0,0,0,255,0,0,255,0,0,102,69,18,102,69,18,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,-1,-1,-1,234,203,153,0,0,0,0,0,0,234,203,153,234,203,153,255,0,0,-1,-1,-1,102,69,18,102,69,18,0,0,255,0,0,255,234,203,153,255,0,0,255,0,0,255,0,0,-1,-1,-1,234,203,153,0,0,0,234,203,153,234,203,153,-1,-1,-1,255,0,0,-1,-1,-1,102,69,18,102,69,18,-1,-1,-1,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,0,0,0,234,203,153,234,203,153,-1,-1,-1,255,0,0,-1,-1,-1,102,69,18,-1,-1,-1,-1,-1,-1,234,203,153,234,203,153,234,203,153,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};
int mariosaut[772]={16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,234,203,153,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,-1,-1,-1,234,203,153,234,203,153,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,102,69,18,-1,-1,-1,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,-1,-1,-1,255,0,0,255,0,0,255,0,0,-1,-1,-1,102,69,18,102,69,18,102,69,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,102,69,18,0,0,255,255,0,0,255,0,0,255,0,0,-1,-1,-1,102,69,18,234,203,153,234,203,153,102,69,18,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,255,0,0,255,0,0,255,0,0,255,0,0,234,203,153,234,203,153,102,69,18,102,69,18,102,69,18,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,0,0,255,234,203,153,234,203,153,102,69,18,234,203,153,102,69,18,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,234,203,153,234,203,153,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,255,255,0,0,0,255,255,0,0,255,0,0,234,203,153,234,203,153,234,203,153,234,203,153,234,203,153,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,0,0,255,255,0,0,255,0,0,234,203,153,0,0,0,234,203,153,0,0,0,0,0,0,255,0,0,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,255,0,0,0,0,255,234,203,153,0,0,0,0,0,0,234,203,153,234,203,153,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,255,255,0,0,0,255,255,0,0,234,203,153,0,0,0,234,203,153,234,203,153,-1,-1,-1,255,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,-1,-1,-1,255,0,0,255,0,0,0,0,0,234,203,153,234,203,153,255,0,0,255,0,0,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,255,0,0,255,0,0,255,-1,-1,-1,-1,-1,-1,255,0,0,255,0,0,234,203,153,255,0,0,255,0,0,234,203,153,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,102,69,18,102,69,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,255,0,0,255,0,0,255,0,0,234,203,153,234,203,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,102,69,18,102,69,18,102,69,18,102,69,18,102,69,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};
int brick[772]={16,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,193,85,29,193,85,29,235,219,197,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,85,29,193,85,29,193,85,29,0,0,0,0,0,0,0,0,0,235,219,197,-1,-1,-1};
int background[772]={16,219,95,33,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,0,0,0,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,219,95,33,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,219,95,33,0,0,0,0,0,0,0,0,0,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,235,219,197,0,0,0,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,235,219,197,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,235,219,197,235,219,197,219,95,33,235,219,197,235,219,197,235,219,197,235,219,197,219,95,33,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,0,0,0,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,0,0,0,219,95,33,219,95,33,219,95,33,219,95,33,235,219,197,219,95,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,95,33,0,0,0,0,0,0,0,0,0,0,0,0,219,95,33,-1,-1,-1};

#define id_mario 1
#define id_brick 2
#define id_background 3


int getkey_down(){
	SDL_Event event;
	while (SDL_PollEvent(&event)) {
		/* Si l'utilisateur a demandé à fermer la fenêtre, on quitte */
		if (event.type == SDL_QUIT) exit(0);
		/* Si l'utilisateur a appuyé sur une touche */
		if (event.type == SDL_KEYDOWN) return event.key.keysym.sym;
	}
	return -1;
}


void wait_enter(){
	char touche=-1;
	printf("presser entrer\n");
	while(touche!=SDLK_RETURN){
		touche=getkey_down();
	}
	attendre(1000);
		
}


int yes_no(){ //renvoie 1 si la touche y est pressé, 0 pour n et -1 si rien n'est préssé 
	SDL_Event event;
	while (SDL_PollEvent(&event)) {
		/* Si l'utilisateur a demandé à fermer la fenêtre, on quitte */
		if (event.type == SDL_QUIT) exit(0);
		/* Si l'utilisateur a appuyé sur une touche */
		if (event.type == SDL_KEYDOWN) {
			switch (event.key.keysym.sym) {
				case SDLK_y   : return 1;
				case SDLK_n   : return 0;
				default 	  : break;
			}
		}
	}
	return -1;
}

POINT molette(int *a){
	
	SDL_Event event;
	
	while (SDL_PollEvent(&event)) {
		
		if (event.type == SDL_QUIT) exit(0);
		if (event.type == SDL_KEYDOWN){
			if(event.key.keysym.sym == SDLK_KP_PLUS){
				*a+=1;attendre(150);
			}
			if(event.key.keysym.sym == SDLK_KP_MINUS){
				*a-=1;attendre(150);
			}

		}
		
		if (event.button.button == SDL_BUTTON_WHEELDOWN) {
			*a-=1; if(*a<1)*a+=1;
		}
		if (event.button.button == SDL_BUTTON_WHEELUP) {
			*a+=1; if(*a>99)*a-=1;
		}
		
		POINT le_clic;
		if ((event.type == SDL_MOUSEBUTTONDOWN) && (event.button.button == SDL_BUTTON_LEFT)) {
			le_clic.x = event.button.x;
			le_clic.y = HEIGHT - event.button.y;
			printf("Clic GAUCHE en %4d %4d               \n",le_clic.x,le_clic.y);
			return le_clic;
		}
	}
	POINT def = {-1,-1};
	return def;
}

int num_molette(){
	fill_screen(black);
	int a=1,stop=0;
	POINT p1={25,575}, p2={435,540}, p3={490,575}, p4, p;
	aff_pol("numero de votre niveau : ",30,p1,white);
	
	p4.x=500; p4.y=550; p1.x=575; p1.y=570;
	draw_fill_rectangle(p4,p1,white);
	p4.y=p1.y-2;p4.x+=20;
	aff_pol("Valider",10,p4,black);

	p1.x=447; p1.y=575;
	while(!stop){
		p=molette(&a);
		
		draw_fill_rectangle(p2,p3,black);
		draw_rectangle(p2,p3,white);
		aff_int(a,25,p1,white);
		
		if(p.x>=500 && p.x<=575 && p.y>=550 && p.y<=570)stop=1;
		
		affiche_all();
	}
	return a;
}


void affiche_menu_ecriture(){
	POINT choix={130,300};
	aff_pol("PLAY A GAME",30,choix,white);
	
	choix.y=220;
	aff_pol("MAKE A GAME",30,choix,white);
	
	choix.y=140;
	aff_pol("PARAMETRER LES TOUCHES",30,choix,white);
	
	choix.y=60;
	aff_pol("QUITTER",30,choix,white);
}

void revenir_menu(){
	fill_screen(ciel);
	POINT p={130,550};
	affiche_image("logo2.bmp",p,176*2,88*2);
	affiche_menu_ecriture();
	stop=0;
}
